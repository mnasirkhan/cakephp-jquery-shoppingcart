
  <div class="post-content">
            <div style="float: right; margin:0px 0px 5px 5px; padding: 5px; border: 1px dashed #4cae4c; ">
                <script src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async=""></script>
<!-- Star Tutorial Content Top -->
<ins data-ad-slot="1074158592" data-ad-client="ca-pub-7968545824537000" style="display: inline-block; width: 300px; height: 250px;" class="adsbygoogle" data-adsbygoogle-status="done"><ins style="display:inline-table;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent" id="aswift_0_expand"><ins style="display:block;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent" id="aswift_0_anchor"><iframe width="300" height="250" frameborder="0" style="left:0;position:absolute;top:0;" name="aswift_0" id="aswift_0" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" allowfullscreen="true" scrolling="no" allowtransparency="true" hspace="0" vspace="0" marginheight="0" marginwidth="0"></iframe></ins></ins></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>            </div>

		
			<p>This is the part 1 of 2 in Build a shopping cart with CakePHP and jQuery.</p>
<div class="alert alert-warning">
	<ul>
		<li>Build a shopping cart with CakePHP and jQuery (part 1)</li>
		<li><a title="Build a shopping cart with CakePHP and jQuery (part 2)" href="http://www.startutorial.com/articles/view/build-a-shopping-cart-with-cakephp-and-jquery-part-2">Build a shopping cart with CakePHP and jQuery (part 2)</a></li>
	</ul>
</div>
 
            							                   		
<blockquote>There are plenty of open source shopping cart in the market right now. 
However we think it is important for a developer to understand how a shopping cart works.
<br><br>
In this series we are going to build a simple shopping cart using CakePHP and jQuery. 
Please note, we focus on building the common functions of a shopping cart using CakePHP,
such as adding product to shopping cart, removing product to shopping cart as well dynamically update shopping cart using ajax.
Its purpose is to demonstrate the basics of building a shopping cart. 
Hence it is not a production ready piece; there are lots of features you need to add before it goes live for production.
<br><br>
This series is for beginners who are learning CakePHP. Let us get started.
</blockquote>

<p>Download link of entire source code is provided in part 2 of this series.</p>

			
			
				<h2 id="top">Table Of Content</h2>
				
                          <ol class="well">
                            <li>
                                <a href="#sec1">Preparation</a>                              
                            </li>
                            <li>
                                <a href="#sec2">Database design</a>                              
                            </li>
                            <li>                                        
                                <a href="#sec3">Install Bootstrap</a>
                            </li>
                            <li>                                        
                                <a href="#sec4">Edit default layout file</a>
                            </li>
							<li>                                        
                                <a href="#sec5">The end</a>
                            </li>
                          </ol>
                           
                <h6 id="sec1">1. Preparation</h6> 
                       <ul>
							<li>
								Download Bootstrap framework from <a href="http://getbootstrap.com/" target="_blank">this URL</a>. 
								We are using Bootstrap 3.0.2 in this series for the front-end design.
								<br>
								Extract downloaded zip file and remove original CSS and JavaScript files, 
								we only need to keep their minified version.
							</li>
							<li>Download CakePHP from <a href="https://github.com/cakephp/cakephp/zipball/2.4.3" target="_blank">this URL</a>.
								We are using CakePHP 2.4.3 for this tutorial.
							</li>
							<li>
								Create a database. We have created a database called "cakephp_shopping_cart". You can name the database based on your preference.
							</li>
							<li>
								Setup CakePHP properly, make sure it can connect to database. 
								If you are not familiar with setting up, read 
								<a target="_blank" href="http://book.cakephp.org/2.0/en/tutorials-and-examples/blog/blog.html">this page</a> first. It will go through steps of setting up a basic CakePHP application.
								
							</li>
							<li>
								Download "s4.jpg", "comment.jpg" and "note3.jpg" to CakePHP's directory "app/webroot/img/". These three images are used for the products' photos.
							</li>
					   </ul>
					   
			                     
                 <h6 id="sec2">2. Database design</h6>
                 <p>Design a very simple database table "products" as below. It stores products' information.
                 The idea here is to demonstrate how CakePHP Model works with database table.</p>
                 <p> <img title="cap forum erd" class="thumbnail" src="http://www.startutorial.com/app/webroot/img/cakephp-shopping-cart-db.png"></p>
 
<p>Import the database table via following codes:</p>               
<div><div class="syntaxhighlighter  sql" id="highlighter_65285"><div class="toolbar"><span><a class="toolbar_item command_help help" href="#">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql keyword">CREATE</code> <code class="sql keyword">TABLE</code> <code class="sql plain">products</code></div><div class="line number2 index1 alt1"><code class="sql plain">(</code></div><div class="line number3 index2 alt2"><code class="sql plain">id </code><code class="sql keyword">INT</code><code class="sql plain">(11) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code> <code class="sql plain">AUTO_INCREMENT,</code></div><div class="line number4 index3 alt1"><code class="sql keyword">name</code> <code class="sql keyword">VARCHAR</code><code class="sql plain">(250) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">,</code></div><div class="line number5 index4 alt2"><code class="sql plain">price </code><code class="sql keyword">FLOAT</code> <code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">,</code></div><div class="line number6 index5 alt1"><code class="sql plain">image </code><code class="sql keyword">VARCHAR</code><code class="sql plain">(250) </code><code class="sql color1">NOT</code> <code class="sql color1">NULL</code><code class="sql plain">,</code></div><div class="line number7 index6 alt2"><code class="sql keyword">PRIMARY</code> <code class="sql keyword">KEY</code> <code class="sql plain">(id)</code></div><div class="line number8 index7 alt1"><code class="sql plain">) ENGINE=InnoDB&nbsp; </code><code class="sql keyword">DEFAULT</code> <code class="sql plain">CHARSET=utf8;</code></div></div></td></tr></tbody></table></div></div>

<p>
Insert some sample products data as well. As you can see, we are not going to build a backend system to manage products in this series. 
Some sample products data are needed.
</p>

<div><div class="syntaxhighlighter  sql" id="highlighter_864614"><div class="toolbar"><span><a class="toolbar_item command_help help" href="#">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="sql keyword">INSERT</code> <code class="sql keyword">INTO</code> <code class="sql plain">`products` (`id`, `</code><code class="sql keyword">name</code><code class="sql plain">`, `price`, `image`) </code><code class="sql keyword">VALUES</code> <code class="sql plain">(</code><code class="sql color1">NULL</code><code class="sql plain">, </code><code class="sql string">'Samsung Galaxy S4'</code><code class="sql plain">, </code><code class="sql string">'600'</code><code class="sql plain">, </code><code class="sql string">'/img/s4.jpg'</code><code class="sql plain">);</code></div><div class="line number2 index1 alt1"><code class="sql keyword">INSERT</code> <code class="sql keyword">INTO</code> <code class="sql plain">`products` (`id`, `</code><code class="sql keyword">name</code><code class="sql plain">`, `price`, `image`) </code><code class="sql keyword">VALUES</code> <code class="sql plain">(</code><code class="sql color1">NULL</code><code class="sql plain">, </code><code class="sql string">'Samsung Galaxy Note 3'</code><code class="sql plain">, </code><code class="sql string">'500'</code><code class="sql plain">, </code><code class="sql string">'/img/note3.jpg'</code><code class="sql plain">);</code></div><div class="line number3 index2 alt2"><code class="sql keyword">INSERT</code> <code class="sql keyword">INTO</code> <code class="sql plain">`products` (`id`, `</code><code class="sql keyword">name</code><code class="sql plain">`, `price`, `image`) </code><code class="sql keyword">VALUES</code> <code class="sql plain">(</code><code class="sql color1">NULL</code><code class="sql plain">, </code><code class="sql string">'Samsung Comment 3'</code><code class="sql plain">, </code><code class="sql string">'400'</code><code class="sql plain">, </code><code class="sql string">'/img/comment.jpg'</code><code class="sql plain">);</code></div></div></td></tr></tbody></table></div></div>



<h6 id="sec3">3. Install Bootstrap</h6>

<p>In this step, we will place Bootstrap resources accordingly to CakePHP application.</p>
<ol>
<li>Copy "fonts" folder from downloaded Bootstrap files to CakePHP's directory "app/webroot".</li>
<li>Copy "bootstrap.min.css" file from downloaded Bootstrap files to CakePHP's directory "app/webroot/css".</li>
<li>Copy "bootstrap.min.js" file from downloaded Bootstrap files to CakePHP's directory "app/webroot/js".</li>
</ol>

<p>Now the "app/webroot" directory should look similar as below:</p>
<p><img title="CakePHP shopping cart" class="thumbnail" src="http://www.startutorial.com/app/webroot/img/cakephp-shopping-cart-bootstrap.png"></p>
<p>The highlighted parts are what we have added.</p>


<h6 id="sec4">4. Edit default layout file</h6> 
 <p>Now if you navigate to the installed CakePHP application, you should view a simple page as below, which indicates CakePHP has been installed properly.</p>
 <p><img title="CakePHP shopping cart webroot" class="thumbnail" src="http://www.startutorial.com/app/webroot/img/cakephp-shopping-cart-index.png"></p>
 <p>In this step, we need to edit the "default.ctp" layout file. Specifically we need to load the Bootstrap resources (JavaScript and CSS files).
 And construct a simple layout for our shopping cart. </p>

 <p>After editting, "app/View/Layouts/default.ctp" should look like below:</p>

<div><div class="syntaxhighlighter  php" id="highlighter_979775"><div class="toolbar"><span><a class="toolbar_item command_help help" href="#">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div><div class="line number60 index59 alt1">60</div><div class="line number61 index60 alt2">61</div><div class="line number62 index61 alt1">62</div><div class="line number63 index62 alt2">63</div><div class="line number64 index63 alt1">64</div><div class="line number65 index64 alt2">65</div><div class="line number66 index65 alt1">66</div><div class="line number67 index66 alt2">67</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;!DOCTYPE html&gt;</code></div><div class="line number2 index1 alt1"><code class="php plain">&lt;html&gt;</code></div><div class="line number3 index2 alt2"><code class="php plain">&lt;head&gt;</code></div><div class="line number4 index3 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$this</code><code class="php plain">-&gt;Html-&gt;charset(); ?&gt;</code></div><div class="line number5 index4 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;title&gt;</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">CakePHP Shopping Cart</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/title&gt;</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php functions">echo</code> <code class="php variable">$this</code><code class="php plain">-&gt;Html-&gt;meta(</code><code class="php string">'icon'</code><code class="php plain">);</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php functions">echo</code> <code class="php variable">$this</code><code class="php plain">-&gt;Html-&gt;css(</code><code class="php string">'bootstrap.min.css'</code><code class="php plain">);</code></div><div class="line number12 index11 alt1">&nbsp;</div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php functions">echo</code> <code class="php variable">$this</code><code class="php plain">-&gt;fetch(</code><code class="php string">'meta'</code><code class="php plain">);</code></div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php functions">echo</code> <code class="php variable">$this</code><code class="php plain">-&gt;fetch(</code><code class="php string">'css'</code><code class="php plain">);</code></div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php functions">echo</code> <code class="php variable">$this</code><code class="php plain">-&gt;fetch(</code><code class="php string">'script'</code><code class="php plain">);</code></div><div class="line number16 index15 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">?&gt;</code></div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;style&gt;</code></div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">body {</code></div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">padding-top: 20px;</code></div><div class="line number20 index19 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">padding-bottom: 20px;</code></div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number22 index21 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">.navbar {</code></div><div class="line number24 index23 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">margin-bottom: 20px;</code></div><div class="line number25 index24 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number26 index25 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/style&gt;</code></div><div class="line number27 index26 alt2">&nbsp;</div><div class="line number28 index27 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;script src="https:</code><code class="php comments">//code.jquery.com/jquery-1.10.2.min.js"&gt;&lt;/script&gt;</code></div><div class="line number29 index28 alt2">&nbsp;</div><div class="line number30 index29 alt1"><code class="php plain">&lt;/head&gt;</code></div><div class="line number31 index30 alt2"><code class="php plain">&lt;body&gt;</code></div><div class="line number32 index31 alt1">&nbsp;</div><div class="line number33 index32 alt2"><code class="php plain">&lt;div </code><code class="php keyword">class</code><code class="php plain">="container"&gt;</code></div><div class="line number34 index33 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number35 index34 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;nav </code><code class="php keyword">class</code><code class="php plain">="navbar navbar-</code><code class="php keyword">default</code><code class="php plain">" role="navigation"&gt;</code></div><div class="line number36 index35 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;!-- Brand </code><code class="php keyword">and</code> <code class="php plain">toggle get grouped </code><code class="php keyword">for</code> <code class="php plain">better mobile display --&gt;</code></div><div class="line number37 index36 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;div </code><code class="php keyword">class</code><code class="php plain">="navbar-header"&gt;</code></div><div class="line number38 index37 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;button type="button" </code><code class="php keyword">class</code><code class="php plain">="navbar-toggle" data-toggle="collapse" data-target="#bs-example-navbar-collapse-1"&gt;</code></div><div class="line number39 index38 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;span </code><code class="php keyword">class</code><code class="php plain">="sr-only"&gt;Toggle navigation&lt;/span&gt;</code></div><div class="line number40 index39 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;span </code><code class="php keyword">class</code><code class="php plain">="icon-bar"&gt;&lt;/span&gt;</code></div><div class="line number41 index40 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;span </code><code class="php keyword">class</code><code class="php plain">="icon-bar"&gt;&lt;/span&gt;</code></div><div class="line number42 index41 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;span </code><code class="php keyword">class</code><code class="php plain">="icon-bar"&gt;&lt;/span&gt;</code></div><div class="line number43 index42 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/button&gt;</code></div><div class="line number44 index43 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;a </code><code class="php keyword">class</code><code class="php plain">="navbar-brand" href="#"&gt;CakePHP Shopping Cart&lt;/a&gt;</code></div><div class="line number45 index44 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/div&gt;</code></div><div class="line number46 index45 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number47 index46 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;!-- Collect the nav links, forms, </code><code class="php keyword">and</code> <code class="php plain">other content </code><code class="php keyword">for</code> <code class="php plain">toggling --&gt;</code></div><div class="line number48 index47 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;div </code><code class="php keyword">class</code><code class="php plain">="collapse navbar-collapse" id="bs-example-navbar-collapse-1"&gt;</code></div><div class="line number49 index48 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;ul </code><code class="php keyword">class</code><code class="php plain">="nav navbar-nav navbar-right"&gt;</code></div><div class="line number50 index49 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;li&gt;</code></div><div class="line number51 index50 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$this</code><code class="php plain">-&gt;Html-&gt;link(</code><code class="php string">'&lt;span class="glyphicon glyphicon-shopping-cart"&gt;&lt;/span&gt; Shopping Cart &lt;span class="badge" id="cart-counter"&gt;0&lt;/span&gt;'</code><code class="php plain">,</code></div><div class="line number52 index51 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'controller'</code><code class="php plain">=&gt;</code><code class="php string">'carts'</code><code class="php plain">,</code><code class="php string">'action'</code><code class="php plain">=&gt;</code><code class="php string">'view'</code><code class="php plain">),</code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'escape'</code><code class="php plain">=&gt;false));?&gt;</code></div><div class="line number53 index52 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/li&gt;</code></div><div class="line number54 index53 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/ul&gt;</code></div><div class="line number55 index54 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/div&gt;&lt;!-- /.navbar-collapse --&gt;</code></div><div class="line number56 index55 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/nav&gt;</code></div><div class="line number57 index56 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number58 index57 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$this</code><code class="php plain">-&gt;fetch(</code><code class="php string">'content'</code><code class="php plain">); ?&gt;</code></div><div class="line number59 index58 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number60 index59 alt1"><code class="php plain">&lt;/div&gt;</code></div><div class="line number61 index60 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number62 index61 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;!-- Bootstrap core JavaScript</code></div><div class="line number63 index62 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">================================================== --&gt;</code></div><div class="line number64 index63 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;!-- Placed at the </code><code class="php functions">end</code> <code class="php plain">of the document so the pages load faster --&gt;</code></div><div class="line number65 index64 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$this</code><code class="php plain">-&gt;Html-&gt;script(</code><code class="php string">'bootstrap.min'</code><code class="php plain">); ?&gt;</code></div><div class="line number66 index65 alt1"><code class="php plain">&lt;/body&gt;</code></div><div class="line number67 index66 alt2"><code class="php plain">&lt;/html&gt;</code></div></div></td></tr></tbody></table></div></div>

<p>You have probably noticed, this is a very simple layout file. It has a top navigation bar with a content area. 
Pay attention to the right corner shopping cart icon. We have assigned an element ID "cart-counter" to it. We will use this ID to identify  and update its value later in the application.</p>

<p>Now the application's default page should look alike below:</p>
<img title="CakePHP shopping cart webroot" class="thumbnail" src="http://www.startutorial.com/app/webroot/img/cakephp-shopping-cart-index-new.png">
 


 <h6 id="sec5">5. The end</h6> 
 <p>In <a title="Build a shopping cart with CakePHP and jQuery (part 2)" href="http://www.startutorial.com/articles/view/build-a-shopping-cart-with-cakephp-and-jquery-part-2">part 2</a> of this series. We are going to implement the core part of shopping cart. Displaying products from database, adding product to cart as well as updating shopping cart. Stay tuned!</p>
 
  <p>
	Hopefully this simple tutorial helped you with your development.<br>
	If you like our post, please follow us on <a target="_blank" href="http://twitter.com/startutorial">Twitter</a> and help spread the word. We need your support to continue.
	<br>
	If you have questions or find our mistakes in above tutorial, do leave a comment below to let us know.
  </p>           

<p class="alert alert-info">
You might also want to check out course <a href="http://www.lynda.com/CakePHP-tutorials/Up-Running-CakePHP/126123-2.html?utm_medium=ldc-partner&amp;utm_source=SSPRC&amp;utm_content=524&amp;utm_campaign=CD15153&amp;bid=524&amp;aid=CD15153" target="_blank">Up and Running with CakePHP</a> from lynda.com.
</p>   
  
            <p>
                <script src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async=""></script>
<!-- Star Tutorial Content Full Width -->
<ins data-ad-slot="5364757395" data-ad-client="ca-pub-7968545824537000" style="display:inline-block;width:728px;height:90px" class="adsbygoogle" data-adsbygoogle-status="done"><ins style="display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent" id="aswift_1_expand"><ins style="display:block;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent" id="aswift_1_anchor"><iframe width="728" height="90" frameborder="0" style="left:0;position:absolute;top:0;" name="aswift_1" id="aswift_1" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" allowfullscreen="true" scrolling="no" allowtransparency="true" hspace="0" vspace="0" marginheight="0" marginwidth="0"></iframe></ins></ins></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>            </p>

			<div style="margin: 19px 0px 0px 0px;" id="sharethis"> 
            <span displaytext="Tweet" class="st_twitter_hcount" st_url="http://www.startutorial.com/articles/view/build-a-shopping-cart-with-cakephp-and-jquery-part-1" st_processed="yes"><span style="text-decoration:none;color:#000000;display:inline-block;cursor:pointer;" class="stButton"><span><span class="stMainServices st-twitter-counter" style="background-image: url(&quot;http://w.sharethis.com/images/twitter_counter.png&quot;);">&nbsp;</span><span class="stArrow"><span class="stButton_gradient stHBubble" style="display: inline-block;"><span class="stBubble_hcount">17</span></span></span></span></span></span>
            <span displaytext="Facebook" class="st_facebook_hcount" st_url="http://www.startutorial.com/articles/view/build-a-shopping-cart-with-cakephp-and-jquery-part-1" st_processed="yes"><span style="text-decoration:none;color:#000000;display:inline-block;cursor:pointer;" class="stButton"><span><span class="stMainServices st-facebook-counter" style="background-image: url(&quot;http://w.sharethis.com/images/facebook_counter.png&quot;);">&nbsp;</span><span class="stArrow"><span class="stButton_gradient stHBubble" style="display: inline-block;"><span class="stBubble_hcount">109</span></span></span></span></span></span>
            <span displaytext="Google plus" class="st_plusone_hcount" st_url="http://www.startutorial.com/articles/view/build-a-shopping-cart-with-cakephp-and-jquery-part-1" st_processed="yes"><div style="display:inline-block;overflow:hidden;line-height:0px;position:relative;vertical-align:middle;bottom:0px;width:75px; height:21px;">&nbsp;<div style="text-indent: 0px; margin: 0px; padding: 0px; background: transparent none repeat scroll 0% 0%; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 90px; height: 20px;" id="___plusone_1"><iframe width="100%" frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position: static; top: 0px; width: 90px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" tabindex="0" vspace="0" id="I1_1465623933320" name="I1_1465623933320" src="https://apis.google.com/se/0/_/+1/fastbutton?usegapi=1&amp;size=medium&amp;count=true&amp;origin=http%3A%2F%2Fwww.startutorial.com&amp;url=http%3A%2F%2Fwww.startutorial.com%2Farticles%2Fview%2Fbuild-a-shopping-cart-with-cakephp-and-jquery-part-1&amp;gsrc=3p&amp;jsh=m%3B%2F_%2Fscs%2Fapps-static%2F_%2Fjs%2Fk%3Doz.gapi.en.4MN1P2SLNzM.O%2Fm%3D__features__%2Fam%3DAQ%2Frt%3Dj%2Fd%3D1%2Frs%3DAGLTcCPlF-r6wrAZhkxBysyjtf3RWyfWJA#_methods=onPlusOne%2C_ready%2C_close%2C_open%2C_resizeMe%2C_renderstart%2Concircled%2Cdrefresh%2Cerefresh&amp;id=I1_1465623933320&amp;parent=http%3A%2F%2Fwww.startutorial.com&amp;pfname=&amp;rpctoken=20479733" data-gapiattached="true" title="+1"></iframe></div></div></span>
            <span displaytext="Stumble" class="st_stumbleupon_hcount" st_url="http://www.startutorial.com/articles/view/build-a-shopping-cart-with-cakephp-and-jquery-part-1" st_processed="yes"><span style="text-decoration:none;color:#000000;display:inline-block;cursor:pointer;" class="stButton"><span><span class="stButton_gradient"><span class="chicklets stumbleupon">Stumble</span></span><span class="stArrow"><span class="stButton_gradient stHBubble" style="display: inline-block;"><span class="stBubble_hcount">2</span></span></span></span></span></span>     
</div>
<div class="post-content">



            <div style="float: right; margin:0px 0px 5px 5px; padding: 5px; border: 1px dashed #4cae4c; ">
                <script src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async=""></script>
<!-- Star Tutorial Content Top -->
<ins data-ad-slot="1074158592" data-ad-client="ca-pub-7968545824537000" style="display: inline-block; width: 300px; height: 250px;" class="adsbygoogle" data-adsbygoogle-status="done"><ins style="display:inline-table;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent" id="aswift_0_expand"><ins style="display:block;border:none;height:250px;margin:0;padding:0;position:relative;visibility:visible;width:300px;background-color:transparent" id="aswift_0_anchor"><iframe width="300" height="250" frameborder="0" style="left:0;position:absolute;top:0;" name="aswift_0" id="aswift_0" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" allowfullscreen="true" scrolling="no" allowtransparency="true" hspace="0" vspace="0" marginheight="0" marginwidth="0"></iframe></ins></ins></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>            </div>

		
			<p>This is the part 2 of 2 in Build a shopping cart with CakePHP and jQuery.</p>
<div class="alert alert-warning">
	<ul>
		<li><a title="Build a shopping cart with CakePHP and jQuery (part 1)" href="http://www.startutorial.com/articles/view/build-a-shopping-cart-with-cakephp-and-jquery-part-1">Build a shopping cart with CakePHP and jQuery (part 1)</a></li>
		<li>Build a shopping cart with CakePHP and jQuery (part 2)</li>
	</ul>
</div>
 
            							                   		
<blockquote>In this tutorial, we are going to implement functions for displaying products, adding product to shopping car as well
as update shopping cart. At the end of this tutorial, a download link is provided for downloading the full source code.
<br><br>
Let us get started.
</blockquote>

<p>Download link of entire source code is provided at the end of this tutorial.</p>

			
			
				<h2 id="top">Table Of Content</h2>
				
                          <ol class="well">
                            <li>
                                <a href="#sec1">Display proudcts and view product's detail</a>                              
                            </li>
                            <li>
                                <a href="#sec2">Add product to shopping cart</a>                              
                            </li>
                            <li>                                        
                                <a href="#sec3">Update shopping cart</a>
                            </li>
                            <li>                                        
                                <a href="#sec4">Wrap it up</a>
                            </li>
                            <li>                                        
                                <a href="#sec5">Download</a>
                            </li>
							<li>                                        
                                <a href="#sec6">The end</a>
                            </li>
                          </ol>
                           
                <h6 id="sec1">1. Display proudcts and view product's detail</h6> 
                <p>In part 1, we have inserted some sample data to "products" table.
                 Now let us build corresponding controller, model and view for "products" table.</p>
                <p>Create model file "app/Model/Product.php" with code below:</p>
<div><div class="syntaxhighlighter  php" id="highlighter_539365"><div class="toolbar"><span><a class="toolbar_item command_help help" href="#">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;?php</code></div><div class="line number2 index1 alt1"><code class="php plain">App::uses(</code><code class="php string">'AppModel'</code><code class="php plain">, </code><code class="php string">'Model'</code><code class="php plain">);</code></div><div class="line number3 index2 alt2"><code class="php keyword">class</code> <code class="php plain">Product </code><code class="php keyword">extends</code> <code class="php plain">AppModel {</code></div><div class="line number4 index3 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number5 index4 alt2"><code class="php plain">}</code></div><div class="line number6 index5 alt1"><code class="php plain">?&gt;</code></div></div></td></tr></tbody></table></div></div>
<p>"Product" class does not do anything specific; it is currently just a placeholder. In case you need to add additional features 
to this application, you may want to add more functions to this class.</p>
                
<p>Create model file "app/Controller/ProductsController.php" with code below:</p>
<div><div class="syntaxhighlighter  php" id="highlighter_680231"><div class="toolbar"><span><a class="toolbar_item command_help help" href="#">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;?php</code></div><div class="line number2 index1 alt1"><code class="php plain">App::uses(</code><code class="php string">'AppController'</code><code class="php plain">, </code><code class="php string">'Controller'</code><code class="php plain">);</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="php keyword">class</code> <code class="php plain">ProductsController </code><code class="php keyword">extends</code> <code class="php plain">AppController {</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">index() {</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;set(</code><code class="php string">'products'</code><code class="php plain">, </code><code class="php variable">$this</code><code class="php plain">-&gt;Product-&gt;find(</code><code class="php string">'all'</code><code class="php plain">));</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">view(</code><code class="php variable">$id</code><code class="php plain">) {</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(!</code><code class="php variable">$this</code><code class="php plain">-&gt;Product-&gt;exists(</code><code class="php variable">$id</code><code class="php plain">)) {</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">throw</code> <code class="php keyword">new</code> <code class="php plain">NotFoundException(__(</code><code class="php string">'Invalid product'</code><code class="php plain">));</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$product</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;Product-&gt;read(null,</code><code class="php variable">$id</code><code class="php plain">);</code></div><div class="line number16 index15 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;set(compact(</code><code class="php string">'product'</code><code class="php plain">));</code></div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}&nbsp;&nbsp; </code></div><div class="line number18 index17 alt1"><code class="php plain">}</code></div><div class="line number19 index18 alt2"><code class="php plain">?&gt;</code></div></div></td></tr></tbody></table></div></div>
<p>There are two functions in the controller class. Each of them serves a view of thier own.</p>
<ol>
<li><strong>public function index():</strong> This functions simply gets all products' data and set it to its corresponding view file.</li>
<li><strong>public function view():</strong> This function finds a product's detail data and set it to its corresponding view file.</li>
</ol>
       
<p>For each controller's action, we need a view file.</p>                 
<p>Create view file "app/View/Products/index.ctp" with code below, this is the view file for displaying all products.</p>
<div><div class="syntaxhighlighter  php" id="highlighter_496896"><div class="toolbar"><span><a class="toolbar_item command_help help" href="#">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;div </code><code class="php keyword">class</code><code class="php plain">="row"&gt;</code></div><div class="line number2 index1 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php </code><code class="php keyword">foreach</code> <code class="php plain">(</code><code class="php variable">$products</code> <code class="php keyword">as</code> <code class="php variable">$product</code><code class="php plain">):?&gt;</code></div><div class="line number3 index2 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;div </code><code class="php keyword">class</code><code class="php plain">="col-sm-6 col-md-4"&gt;</code></div><div class="line number4 index3 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;div </code><code class="php keyword">class</code><code class="php plain">=""&gt;</code></div><div class="line number5 index4 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$this</code><code class="php plain">-&gt;Html-&gt;link(</code><code class="php variable">$this</code><code class="php plain">-&gt;Html-&gt;image(</code><code class="php variable">$product</code><code class="php plain">[</code><code class="php string">'Product'</code><code class="php plain">][</code><code class="php string">'image'</code><code class="php plain">]),</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'action'</code><code class="php plain">=&gt;</code><code class="php string">'view'</code><code class="php plain">,</code><code class="php variable">$product</code><code class="php plain">[</code><code class="php string">'Product'</code><code class="php plain">][</code><code class="php string">'id'</code><code class="php plain">]),</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'escape'</code><code class="php plain">=&gt;false,</code><code class="php string">'class'</code><code class="php plain">=&gt;</code><code class="php string">'thumbnail'</code><code class="php plain">));?&gt;</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;div </code><code class="php keyword">class</code><code class="php plain">="caption"&gt;</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;h5&gt;</code></div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$product</code><code class="php plain">[</code><code class="php string">'Product'</code><code class="php plain">][</code><code class="php string">'name'</code><code class="php plain">];?&gt;</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/h5&gt;</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;h5&gt;</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">Price: $</code></div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$product</code><code class="php plain">[</code><code class="php string">'Product'</code><code class="php plain">][</code><code class="php string">'price'</code><code class="php plain">];?&gt;</code></div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/h5&gt;</code></div><div class="line number16 index15 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/div&gt;</code></div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/div&gt;</code></div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/div&gt;</code></div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php </code><code class="php keyword">endforeach</code><code class="php plain">;?&gt;</code></div><div class="line number20 index19 alt1"><code class="php plain">&lt;/div&gt;</code></div></div></td></tr></tbody></table></div></div>
			 
<p>Create view file "app/View/Products/view.ctp" with code below, this is the view file for viewing a product's detail.</p>
<div><div class="syntaxhighlighter  php" id="highlighter_497223"><div class="toolbar"><span><a class="toolbar_item command_help help" href="#">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;div </code><code class="php keyword">class</code><code class="php plain">="row"&gt;</code></div><div class="line number2 index1 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;div </code><code class="php keyword">class</code><code class="php plain">="col-lg-12"&gt;</code></div><div class="line number3 index2 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;ol </code><code class="php keyword">class</code><code class="php plain">="breadcrumb"&gt;</code></div><div class="line number4 index3 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;li&gt;&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$this</code><code class="php plain">-&gt;Html-&gt;link(</code><code class="php string">'Home'</code><code class="php plain">,</code><code class="php string">'/'</code><code class="php plain">);?&gt;</code></div><div class="line number5 index4 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/li&gt;</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;li </code><code class="php keyword">class</code><code class="php plain">="active"&gt;&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$product</code><code class="php plain">[</code><code class="php string">'Product'</code><code class="php plain">][</code><code class="php string">'name'</code><code class="php plain">];?&gt;</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/li&gt;</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/ol&gt;</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/div&gt;</code></div><div class="line number10 index9 alt1"><code class="php plain">&lt;/div&gt;</code></div><div class="line number11 index10 alt2">&nbsp;</div><div class="line number12 index11 alt1"><code class="php plain">&lt;div </code><code class="php keyword">class</code><code class="php plain">="row"&gt;</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;div </code><code class="php keyword">class</code><code class="php plain">="col-lg-4 col-md-4"&gt;</code></div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$this</code><code class="php plain">-&gt;Html-&gt;image(</code><code class="php variable">$product</code><code class="php plain">[</code><code class="php string">'Product'</code><code class="php plain">][</code><code class="php string">'image'</code><code class="php plain">],</code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'class'</code><code class="php plain">=&gt;</code><code class="php string">'thumbnail'</code><code class="php plain">));?&gt;</code></div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/div&gt;</code></div><div class="line number16 index15 alt1">&nbsp;</div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;div </code><code class="php keyword">class</code><code class="php plain">="col-lg-8 col-md-8"&gt;</code></div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;h1&gt;</code></div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$product</code><code class="php plain">[</code><code class="php string">'Product'</code><code class="php plain">][</code><code class="php string">'name'</code><code class="php plain">];?&gt;</code></div><div class="line number20 index19 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/h1&gt;</code></div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;h2&gt;</code></div><div class="line number22 index21 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">Price: $</code></div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$product</code><code class="php plain">[</code><code class="php string">'Product'</code><code class="php plain">][</code><code class="php string">'price'</code><code class="php plain">];?&gt;</code></div><div class="line number24 index23 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/h2&gt;</code></div><div class="line number25 index24 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;p&gt;</code></div><div class="line number26 index25 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$this</code><code class="php plain">-&gt;Form-&gt;create(</code><code class="php string">'Cart'</code><code class="php plain">,</code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'id'</code><code class="php plain">=&gt;</code><code class="php string">'add-form'</code><code class="php plain">,</code><code class="php string">'url'</code><code class="php plain">=&gt;</code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'controller'</code><code class="php plain">=&gt;</code><code class="php string">'carts'</code><code class="php plain">,</code><code class="php string">'action'</code><code class="php plain">=&gt;</code><code class="php string">'add'</code><code class="php plain">)));?&gt;</code></div><div class="line number27 index26 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$this</code><code class="php plain">-&gt;Form-&gt;hidden(</code><code class="php string">'product_id'</code><code class="php plain">,</code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'value'</code><code class="php plain">=&gt;</code><code class="php variable">$product</code><code class="php plain">[</code><code class="php string">'Product'</code><code class="php plain">][</code><code class="php string">'id'</code><code class="php plain">]))?&gt;</code></div><div class="line number28 index27 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$this</code><code class="php plain">-&gt;Form-&gt;submit(</code><code class="php string">'Add to cart'</code><code class="php plain">,</code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'class'</code><code class="php plain">=&gt;</code><code class="php string">'btn-success btn btn-lg'</code><code class="php plain">));?&gt;</code></div><div class="line number29 index28 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$this</code><code class="php plain">-&gt;Form-&gt;</code><code class="php functions">end</code><code class="php plain">();?&gt;</code></div><div class="line number30 index29 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/p&gt;</code></div><div class="line number31 index30 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/div&gt;</code></div><div class="line number32 index31 alt1"><code class="php plain">&lt;/div&gt;</code></div></div></td></tr></tbody></table></div></div>     

<p>Now we have created the file views we needed for this section. However navigate to index page of the shopping cart. 
It still gives us the CakePHP's default page. What we want is that, the index page should display all products. Adding a routing rule to the Router can do this.</p>

<p>Open app/Config/routes.php, and add following line to the beginning of the file:</p>
<div><div class="syntaxhighlighter  php" id="highlighter_559928"><div class="toolbar"><span><a class="toolbar_item command_help help" href="#">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">Router::connect(</code><code class="php string">'/'</code><code class="php plain">, </code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'controller'</code> <code class="php plain">=&gt; </code><code class="php string">'products'</code><code class="php plain">, </code><code class="php string">'action'</code> <code class="php plain">=&gt; </code><code class="php string">'index'</code><code class="php plain">));</code></div></div></td></tr></tbody></table></div></div>

<p>This tells the shopping cart to show "products/index" page by default.</p>
<p>Now you should be see following page.</p>
<p>
<img title="cap forum erd" class="thumbnail" src="http://www.startutorial.com/app/webroot/img/cakephp-shopping-cart-display.png">
</p>
<p>Clicking on the thumbnail image, it should show you below.</p>
<p>
<img title="cap forum erd" class="thumbnail" src="http://www.startutorial.com/app/webroot/img/cakephp-shopping-cart-view.png">
</p>

                 
                 <h6 id="sec2">2. Add product to shopping cart</h6>
                 <p>You should probably notice that, the "Add to cart" button is not yet working. That is what we are going to fix in this section.</p>
                 <p>Since we do not have a database table to store shopping cart's items. 
                 We are going to use Session. Let us create a powerful "Cart" model, which we will be using to represent the shopping cart. 
                 It is a model without database table.</p>
<div><div class="syntaxhighlighter  php" id="highlighter_506678"><div class="toolbar"><span><a class="toolbar_item command_help help" href="#">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div><div class="line number58 index57 alt1">58</div><div class="line number59 index58 alt2">59</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;?php</code></div><div class="line number2 index1 alt1"><code class="php plain">App::uses(</code><code class="php string">'AppModel'</code><code class="php plain">, </code><code class="php string">'Model'</code><code class="php plain">);</code></div><div class="line number3 index2 alt2"><code class="php plain">App::uses(</code><code class="php string">'CakeSession'</code><code class="php plain">, </code><code class="php string">'Model/Datasource'</code><code class="php plain">);</code></div><div class="line number4 index3 alt1">&nbsp;</div><div class="line number5 index4 alt2"><code class="php keyword">class</code> <code class="php plain">Cart </code><code class="php keyword">extends</code> <code class="php plain">AppModel {</code></div><div class="line number6 index5 alt1">&nbsp;</div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php variable">$useTable</code> <code class="php plain">= false; </code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">/*</code></div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">* add a product to cart</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">*/</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">addProduct(</code><code class="php variable">$productId</code><code class="php plain">) {</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$allProducts</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;read();</code></div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(null!=</code><code class="php variable">$allProducts</code><code class="php plain">) {</code></div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php functions">array_key_exists</code><code class="php plain">(</code><code class="php variable">$productId</code><code class="php plain">, </code><code class="php variable">$allProducts</code><code class="php plain">)) {</code></div><div class="line number16 index15 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$allProducts</code><code class="php plain">[</code><code class="php variable">$productId</code><code class="php plain">]++;</code></div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">} </code><code class="php keyword">else</code> <code class="php plain">{</code></div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$allProducts</code><code class="php plain">[</code><code class="php variable">$productId</code><code class="php plain">] = 1;</code></div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number20 index19 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">} </code><code class="php keyword">else</code> <code class="php plain">{</code></div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$allProducts</code><code class="php plain">[</code><code class="php variable">$productId</code><code class="php plain">] = 1;</code></div><div class="line number22 index21 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number24 index23 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;saveProduct(</code><code class="php variable">$allProducts</code><code class="php plain">);</code></div><div class="line number25 index24 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number26 index25 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number27 index26 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">/*</code></div><div class="line number28 index27 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">* get total count of products</code></div><div class="line number29 index28 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">*/</code></div><div class="line number30 index29 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">getCount() {</code></div><div class="line number31 index30 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$allProducts</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;readProduct();</code></div><div class="line number32 index31 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number33 index32 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php functions">count</code><code class="php plain">(</code><code class="php variable">$allProducts</code><code class="php plain">)&lt;1) {</code></div><div class="line number34 index33 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php plain">0;</code></div><div class="line number35 index34 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number36 index35 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number37 index36 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$count</code> <code class="php plain">= 0;</code></div><div class="line number38 index37 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">foreach</code> <code class="php plain">(</code><code class="php variable">$allProducts</code> <code class="php keyword">as</code> <code class="php variable">$product</code><code class="php plain">) {</code></div><div class="line number39 index38 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$count</code><code class="php plain">=</code><code class="php variable">$count</code><code class="php plain">+</code><code class="php variable">$product</code><code class="php plain">;</code></div><div class="line number40 index39 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number41 index40 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number42 index41 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php variable">$count</code><code class="php plain">;</code></div><div class="line number43 index42 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number44 index43 alt1">&nbsp;</div><div class="line number45 index44 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">/*</code></div><div class="line number46 index45 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">* save data to session</code></div><div class="line number47 index46 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">*/</code></div><div class="line number48 index47 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">saveProduct(</code><code class="php variable">$data</code><code class="php plain">) {</code></div><div class="line number49 index48 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php plain">CakeSession::write(</code><code class="php string">'cart'</code><code class="php plain">,</code><code class="php variable">$data</code><code class="php plain">);</code></div><div class="line number50 index49 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number51 index50 alt2">&nbsp;</div><div class="line number52 index51 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">/*</code></div><div class="line number53 index52 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">* read cart data from session</code></div><div class="line number54 index53 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php comments">*/</code></div><div class="line number55 index54 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">readProduct() {</code></div><div class="line number56 index55 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">return</code> <code class="php plain">CakeSession::read(</code><code class="php string">'cart'</code><code class="php plain">);</code></div><div class="line number57 index56 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number58 index57 alt1">&nbsp;</div><div class="line number59 index58 alt2"><code class="php plain">}</code></div></div></td></tr></tbody></table></div></div>                 

<p>Let us divide into this class.</p>
<p>Since this model class is not using any database table, we use "<strong>public $useTable = false;</strong>" to tell CakePHP not to look for its table.</p>
<p>We are going to store the shopping items into Session using structure as below:</p> 
<div><div class="syntaxhighlighter  php" id="highlighter_569315"><div class="toolbar"><span><a class="toolbar_item command_help help" href="#">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php keyword">array</code><code class="php plain">(</code></div><div class="line number2 index1 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">product_id =&gt; number_of_items</code></div><div class="line number3 index2 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">...</code></div><div class="line number4 index3 alt1"><code class="php plain">)&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </code></div></div></td></tr></tbody></table></div></div>
<p>Let us take a look at each function:</p>
<ol>
	<li><strong>public function addProduct($productId):</strong> it takes a $productId and add it to the shopping cart accordingly. 
															It will either increase the item's counter or add a new item to the array.</li>
	<li><strong>public function getCount():</strong> it loop through the array and count number of products in cart.</li>	
	<li><strong>public function saveProduct():</strong> a simple wrap function, it stores data to Session using "cart" as the key.</li>		
	<li><strong>public function readProduct():</strong> it reads data from Session using "cart" as the key.</li>															
</ol>   


<p>Okay, now we have built the "Cart" class. Let us get back to our task of adding product to cart.</p>
<p>Create controller file "app/Controller/CartsController.php" with code below:</p>
     
<div><div class="syntaxhighlighter  php" id="highlighter_84007"><div class="toolbar"><span><a class="toolbar_item command_help help" href="#">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;?php</code></div><div class="line number2 index1 alt1"><code class="php plain">App::uses(</code><code class="php string">'AppController'</code><code class="php plain">, </code><code class="php string">'Controller'</code><code class="php plain">);</code></div><div class="line number3 index2 alt2">&nbsp;</div><div class="line number4 index3 alt1"><code class="php keyword">class</code> <code class="php plain">CartsController </code><code class="php keyword">extends</code> <code class="php plain">AppController {</code></div><div class="line number5 index4 alt2">&nbsp;</div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php variable">$uses</code> <code class="php plain">= </code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'Product'</code><code class="php plain">,</code><code class="php string">'Cart'</code><code class="php plain">);</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">add() {</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;autoRender = false;</code></div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$this</code><code class="php plain">-&gt;request-&gt;is(</code><code class="php string">'post'</code><code class="php plain">)) {</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;Cart-&gt;addProduct(</code><code class="php variable">$this</code><code class="php plain">-&gt;request-&gt;data[</code><code class="php string">'Cart'</code><code class="php plain">][</code><code class="php string">'product_id'</code><code class="php plain">]);</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php functions">echo</code> <code class="php variable">$this</code><code class="php plain">-&gt;Cart-&gt;getCount();</code></div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number15 index14 alt2"><code class="php plain">}</code></div></div></td></tr></tbody></table></div></div>

<p>As you can see, <strong>public function addProduct()</strong> is the action for adding product to cart. This function does not require a view, because we are going to 
call this functio via ajax. All it does is to return a count of total products in the cart.</p>
<p>We turn off the view file by calling <strong>$this-&gt;autoRender = false;</strong>. And we use "Cart" class functions, which we built previously, to add product and
get total products' count. </p>

<p>The last thing we need to do in this step is to add some JavaScript codes to the view. </p>
<p>Open file "app/View/Products/view.ctp", and following piece of JavaScript codes to the end of the file:</p>
<div><div class="syntaxhighlighter  php" id="highlighter_325626"><div class="toolbar"><span><a class="toolbar_item command_help help" href="#">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;script&gt;</code></div><div class="line number2 index1 alt1"><code class="php plain">$(document).ready(</code><code class="php keyword">function</code><code class="php plain">(){</code></div><div class="line number3 index2 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">$(</code><code class="php string">'#add-form'</code><code class="php plain">).submit(</code><code class="php keyword">function</code><code class="php plain">(e){</code></div><div class="line number4 index3 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">e.preventDefault();</code></div><div class="line number5 index4 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">var</code> <code class="php plain">tis = $(this);</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">$.post(tis.attr(</code><code class="php string">'action'</code><code class="php plain">),tis.serialize(),</code><code class="php keyword">function</code><code class="php plain">(data){</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">$(</code><code class="php string">'#cart-counter'</code><code class="php plain">).text(data);</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">});</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">});</code></div><div class="line number10 index9 alt1"><code class="php plain">});</code></div><div class="line number11 index10 alt2"><code class="php plain">&lt;/script&gt;</code></div></div></td></tr></tbody></table></div></div>
<p>This piece of JavaScript codes simply calls action "carts/add" and set the counter text correctly.</p>
<p>Now head back to your browser, and clicking "Add to cart" button in product detail page, it should dynamically set the counter on the top right corner correctly.</p>

<h6 id="sec3">3. Update shopping cart</h6>

<p>The final function we are going to implement is to update shopping cart items. However before that, we need to have 
a shopping cart page, which lists all current items in the cart.</p>

<p>First let us add a controller's action to CartsController class. Open file "app/Controller/CartsController" and 
add function below after function "add()":</p>
<div><div class="syntaxhighlighter  php" id="highlighter_377988"><div class="toolbar"><span><a class="toolbar_item command_help help" href="#">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">view() {</code></div><div class="line number2 index1 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$carts</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;Cart-&gt;readProduct();</code></div><div class="line number3 index2 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$products</code> <code class="php plain">= </code><code class="php keyword">array</code><code class="php plain">();</code></div><div class="line number4 index3 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(null!=</code><code class="php variable">$carts</code><code class="php plain">) {</code></div><div class="line number5 index4 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">foreach</code> <code class="php plain">(</code><code class="php variable">$carts</code> <code class="php keyword">as</code> <code class="php variable">$productId</code> <code class="php plain">=&gt; </code><code class="php variable">$count</code><code class="php plain">) {</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$product</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;Product-&gt;read(null,</code><code class="php variable">$productId</code><code class="php plain">);</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$product</code><code class="php plain">[</code><code class="php string">'Product'</code><code class="php plain">][</code><code class="php string">'count'</code><code class="php plain">] = </code><code class="php variable">$count</code><code class="php plain">;</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$products</code><code class="php plain">[]=</code><code class="php variable">$product</code><code class="php plain">;</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">} </code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;set(compact(</code><code class="php string">'products'</code><code class="php plain">));</code></div><div class="line number12 index11 alt1"><code class="php plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>This function loops over items in the shopping cart and find their details.</p>
<p>We need a view file for this action too. Create file "app/Carts/view.ctp" with code below:</p>
<div><div class="syntaxhighlighter  php" id="highlighter_160811"><div class="toolbar"><span><a class="toolbar_item command_help help" href="#">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div><div class="line number16 index15 alt1">16</div><div class="line number17 index16 alt2">17</div><div class="line number18 index17 alt1">18</div><div class="line number19 index18 alt2">19</div><div class="line number20 index19 alt1">20</div><div class="line number21 index20 alt2">21</div><div class="line number22 index21 alt1">22</div><div class="line number23 index22 alt2">23</div><div class="line number24 index23 alt1">24</div><div class="line number25 index24 alt2">25</div><div class="line number26 index25 alt1">26</div><div class="line number27 index26 alt2">27</div><div class="line number28 index27 alt1">28</div><div class="line number29 index28 alt2">29</div><div class="line number30 index29 alt1">30</div><div class="line number31 index30 alt2">31</div><div class="line number32 index31 alt1">32</div><div class="line number33 index32 alt2">33</div><div class="line number34 index33 alt1">34</div><div class="line number35 index34 alt2">35</div><div class="line number36 index35 alt1">36</div><div class="line number37 index36 alt2">37</div><div class="line number38 index37 alt1">38</div><div class="line number39 index38 alt2">39</div><div class="line number40 index39 alt1">40</div><div class="line number41 index40 alt2">41</div><div class="line number42 index41 alt1">42</div><div class="line number43 index42 alt2">43</div><div class="line number44 index43 alt1">44</div><div class="line number45 index44 alt2">45</div><div class="line number46 index45 alt1">46</div><div class="line number47 index46 alt2">47</div><div class="line number48 index47 alt1">48</div><div class="line number49 index48 alt2">49</div><div class="line number50 index49 alt1">50</div><div class="line number51 index50 alt2">51</div><div class="line number52 index51 alt1">52</div><div class="line number53 index52 alt2">53</div><div class="line number54 index53 alt1">54</div><div class="line number55 index54 alt2">55</div><div class="line number56 index55 alt1">56</div><div class="line number57 index56 alt2">57</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;div </code><code class="php keyword">class</code><code class="php plain">="row"&gt;</code></div><div class="line number2 index1 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;div </code><code class="php keyword">class</code><code class="php plain">="col-lg-12"&gt;</code></div><div class="line number3 index2 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;ol </code><code class="php keyword">class</code><code class="php plain">="breadcrumb"&gt;</code></div><div class="line number4 index3 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;li&gt;&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$this</code><code class="php plain">-&gt;Html-&gt;link(</code><code class="php string">'Home'</code><code class="php plain">,</code><code class="php string">'/'</code><code class="php plain">);?&gt;</code></div><div class="line number5 index4 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/li&gt;</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;li </code><code class="php keyword">class</code><code class="php plain">="active"&gt;Cart&lt;/li&gt;</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/ol&gt;</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/div&gt;</code></div><div class="line number9 index8 alt2"><code class="php plain">&lt;/div&gt;</code></div><div class="line number10 index9 alt1">&nbsp;</div><div class="line number11 index10 alt2"><code class="php plain">&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$this</code><code class="php plain">-&gt;Form-&gt;create(</code><code class="php string">'Cart'</code><code class="php plain">,</code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'url'</code><code class="php plain">=&gt;</code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'action'</code><code class="php plain">=&gt;</code><code class="php string">'update'</code><code class="php plain">)));?&gt;</code></div><div class="line number12 index11 alt1"><code class="php plain">&lt;div </code><code class="php keyword">class</code><code class="php plain">="row"&gt;</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;div </code><code class="php keyword">class</code><code class="php plain">="col-lg-12"&gt;</code></div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;table </code><code class="php keyword">class</code><code class="php plain">="table"&gt;</code></div><div class="line number15 index14 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;thead&gt;</code></div><div class="line number16 index15 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;tr&gt;</code></div><div class="line number17 index16 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;th&gt;Product Name&lt;/th&gt;</code></div><div class="line number18 index17 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;th&gt;Price&lt;/th&gt;</code></div><div class="line number19 index18 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;th&gt;Quantity&lt;/th&gt;</code></div><div class="line number20 index19 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;th&gt;Total&lt;/th&gt;</code></div><div class="line number21 index20 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/tr&gt;</code></div><div class="line number22 index21 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/thead&gt;</code></div><div class="line number23 index22 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;tbody&gt;</code></div><div class="line number24 index23 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php </code><code class="php variable">$total</code><code class="php plain">=0;?&gt;</code></div><div class="line number25 index24 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php </code><code class="php keyword">foreach</code> <code class="php plain">(</code><code class="php variable">$products</code> <code class="php keyword">as</code> <code class="php variable">$product</code><code class="php plain">):?&gt;</code></div><div class="line number26 index25 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;tr&gt;</code></div><div class="line number27 index26 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;td&gt;&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$product</code><code class="php plain">[</code><code class="php string">'Product'</code><code class="php plain">][</code><code class="php string">'name'</code><code class="php plain">];?&gt;&lt;/td&gt;</code></div><div class="line number28 index27 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;td&gt;$&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$product</code><code class="php plain">[</code><code class="php string">'Product'</code><code class="php plain">][</code><code class="php string">'price'</code><code class="php plain">];?&gt;</code></div><div class="line number29 index28 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/td&gt;</code></div><div class="line number30 index29 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;td&gt;&lt;div </code><code class="php keyword">class</code><code class="php plain">="col-xs-3"&gt;</code></div><div class="line number31 index30 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$this</code><code class="php plain">-&gt;Form-&gt;hidden(</code><code class="php string">'product_id.'</code><code class="php plain">,</code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'value'</code><code class="php plain">=&gt;</code><code class="php variable">$product</code><code class="php plain">[</code><code class="php string">'Product'</code><code class="php plain">][</code><code class="php string">'id'</code><code class="php plain">]));?&gt;</code></div><div class="line number32 index31 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$this</code><code class="php plain">-&gt;Form-&gt;input(</code><code class="php string">'count.'</code><code class="php plain">,</code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'type'</code><code class="php plain">=&gt;</code><code class="php string">'number'</code><code class="php plain">, </code><code class="php string">'label'</code><code class="php plain">=&gt;false,</code></div><div class="line number33 index32 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php string">'class'</code><code class="php plain">=&gt;</code><code class="php string">'form-control input-sm'</code><code class="php plain">, </code><code class="php string">'value'</code><code class="php plain">=&gt;</code><code class="php variable">$product</code><code class="php plain">[</code><code class="php string">'Product'</code><code class="php plain">][</code><code class="php string">'count'</code><code class="php plain">]));?&gt;</code></div><div class="line number34 index33 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/div&gt;&lt;/td&gt;</code></div><div class="line number35 index34 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;td&gt;$&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$count</code><code class="php plain">*</code><code class="php variable">$product</code><code class="php plain">[</code><code class="php string">'Product'</code><code class="php plain">][</code><code class="php string">'price'</code><code class="php plain">]; ?&gt;</code></div><div class="line number36 index35 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/td&gt;</code></div><div class="line number37 index36 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/tr&gt;</code></div><div class="line number38 index37 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php </code><code class="php variable">$total</code> <code class="php plain">= </code><code class="php variable">$total</code> <code class="php plain">+ (</code><code class="php variable">$count</code><code class="php plain">*</code><code class="php variable">$product</code><code class="php plain">[</code><code class="php string">'Product'</code><code class="php plain">][</code><code class="php string">'price'</code><code class="php plain">]);?&gt;</code></div><div class="line number39 index38 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php </code><code class="php keyword">endforeach</code><code class="php plain">;?&gt;</code></div><div class="line number40 index39 alt1">&nbsp;</div><div class="line number41 index40 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;tr </code><code class="php keyword">class</code><code class="php plain">="success"&gt;</code></div><div class="line number42 index41 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;td colspan=3&gt;&lt;/td&gt;</code></div><div class="line number43 index42 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;td&gt;$&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$total</code><code class="php plain">;?&gt;</code></div><div class="line number44 index43 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/td&gt;</code></div><div class="line number45 index44 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/tr&gt;</code></div><div class="line number46 index45 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/tbody&gt;</code></div><div class="line number47 index46 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/table&gt;</code></div><div class="line number48 index47 alt1">&nbsp;</div><div class="line number49 index48 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;p </code><code class="php keyword">class</code><code class="php plain">="text-right"&gt;</code></div><div class="line number50 index49 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$this</code><code class="php plain">-&gt;Form-&gt;submit(</code><code class="php string">'Update'</code><code class="php plain">,</code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'class'</code><code class="php plain">=&gt;</code><code class="php string">'btn btn-warning'</code><code class="php plain">,</code><code class="php string">'div'</code><code class="php plain">=&gt;false));?&gt;</code></div><div class="line number51 index50 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;a </code><code class="php keyword">class</code><code class="php plain">="btn btn-success"</code></div><div class="line number52 index51 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">onclick="alert(</code><code class="php string">'Implement a payment module for buyer to make a payment.'</code><code class="php plain">);"&gt;CheckOut&lt;/a&gt;</code></div><div class="line number53 index52 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/p&gt;</code></div><div class="line number54 index53 alt1">&nbsp;</div><div class="line number55 index54 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">&lt;/div&gt;</code></div><div class="line number56 index55 alt1"><code class="php plain">&lt;/div&gt;</code></div><div class="line number57 index56 alt2"><code class="php plain">&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$this</code><code class="php plain">-&gt;Form-&gt;</code><code class="php functions">end</code><code class="php plain">();?&gt;</code></div></div></td></tr></tbody></table></div></div>

<p>This file looks big. But its main part is actually just the table. Rest is HTML structure for the design.</p>
<p>Now if you navigate to the shopping cart view page by clicking the cart icon on the top right corner. You should see:</p>
<p><img title="cap forum erd" class="thumbnail" src="http://www.startutorial.com/app/webroot/img/cakephp-shopping-cart-page.png"></p>

<p>Here comes the last part, open file "app/Controller/CartsController.php" and add following function after function "view()"</p>
<div><div class="syntaxhighlighter  php" id="highlighter_202985"><div class="toolbar"><span><a class="toolbar_item command_help help" href="#">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div><div class="line number6 index5 alt1">6</div><div class="line number7 index6 alt2">7</div><div class="line number8 index7 alt1">8</div><div class="line number9 index8 alt2">9</div><div class="line number10 index9 alt1">10</div><div class="line number11 index10 alt2">11</div><div class="line number12 index11 alt1">12</div><div class="line number13 index12 alt2">13</div><div class="line number14 index13 alt1">14</div><div class="line number15 index14 alt2">15</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">update() {</code></div><div class="line number2 index1 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$this</code><code class="php plain">-&gt;request-&gt;is(</code><code class="php string">'post'</code><code class="php plain">)) {</code></div><div class="line number3 index2 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(!</code><code class="php functions">empty</code><code class="php plain">(</code><code class="php variable">$this</code><code class="php plain">-&gt;request-&gt;data)) {</code></div><div class="line number4 index3 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$cart</code> <code class="php plain">= </code><code class="php keyword">array</code><code class="php plain">();</code></div><div class="line number5 index4 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">foreach</code> <code class="php plain">(</code><code class="php variable">$this</code><code class="php plain">-&gt;request-&gt;data[</code><code class="php string">'Cart'</code><code class="php plain">][</code><code class="php string">'count'</code><code class="php plain">] </code><code class="php keyword">as</code> <code class="php variable">$index</code><code class="php plain">=&gt;</code><code class="php variable">$count</code><code class="php plain">) {</code></div><div class="line number6 index5 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">if</code> <code class="php plain">(</code><code class="php variable">$count</code><code class="php plain">&gt;0) {</code></div><div class="line number7 index6 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$productId</code> <code class="php plain">= </code><code class="php variable">$this</code><code class="php plain">-&gt;request-&gt;data[</code><code class="php string">'Cart'</code><code class="php plain">][</code><code class="php string">'product_id'</code><code class="php plain">][</code><code class="php variable">$index</code><code class="php plain">];</code></div><div class="line number8 index7 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$cart</code><code class="php plain">[</code><code class="php variable">$productId</code><code class="php plain">] = </code><code class="php variable">$count</code><code class="php plain">;</code></div><div class="line number9 index8 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number10 index9 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number11 index10 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;Cart-&gt;saveProduct(</code><code class="php variable">$cart</code><code class="php plain">);</code></div><div class="line number12 index11 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number13 index12 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php plain">}</code></div><div class="line number14 index13 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;redirect(</code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'action'</code><code class="php plain">=&gt;</code><code class="php string">'view'</code><code class="php plain">));</code></div><div class="line number15 index14 alt2"><code class="php plain">} </code></div></div></td></tr></tbody></table></div></div>
<p>This function is triggered when you click "Update" button on shopping cart page. What it does is that, it loops over product count and add it to the Session.
Please note if the product's count is less than 0, it is removed from Session, which means it is removed from shopping cart.
</p>

<h6 id="sec4">4. Wrap it up</h6> 
<p>It is almost done. There is only one thing we need to take care of here. 
If you recall. The top right corner counter is still a static value of 0. 
We need to modify that piece to reflect the real time items' count.
</p>

<p>Open file "app/Controller/AppController.php" and add following function to it:</p>

<div><div class="syntaxhighlighter  php" id="highlighter_445516"><div class="toolbar"><span><a class="toolbar_item command_help help" href="#">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div><div class="line number3 index2 alt2">3</div><div class="line number4 index3 alt1">4</div><div class="line number5 index4 alt2">5</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php keyword">public</code> <code class="php keyword">function</code> <code class="php plain">beforeFilter() {</code></div><div class="line number2 index1 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;loadModel(</code><code class="php string">'Cart'</code><code class="php plain">);</code></div><div class="line number3 index2 alt2"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code>&nbsp;</div><div class="line number4 index3 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php variable">$this</code><code class="php plain">-&gt;set(</code><code class="php string">'count'</code><code class="php plain">,</code><code class="php variable">$this</code><code class="php plain">-&gt;Cart-&gt;getCount());</code></div><div class="line number5 index4 alt2"><code class="php plain">}</code></div></div></td></tr></tbody></table></div></div>
<p>This function will set the real time items' count to all the view files, which includes layout file.
Hence open layout file "app/View/Layouts/default.ctp" and change the static value 0 to $count.</p>

<div><div class="syntaxhighlighter  php" id="highlighter_473629"><div class="toolbar"><span><a class="toolbar_item command_help help" href="#">?</a></span></div><table cellspacing="0" cellpadding="0" border="0"><tbody><tr><td class="gutter"><div class="line number1 index0 alt2">1</div><div class="line number2 index1 alt1">2</div></td><td class="code"><div class="container"><div class="line number1 index0 alt2"><code class="php plain">&lt;?php </code><code class="php functions">echo</code> <code class="php variable">$this</code><code class="php plain">-&gt;Html-&gt;link(</code><code class="php string">'&lt;span class="glyphicon glyphicon-shopping-cart"&gt;&lt;/span&gt; Shopping Cart &lt;span class="badge" id="cart-counter"&gt;'</code><code class="php plain">.</code><code class="php variable">$count</code><code class="php plain">.</code><code class="php string">'&lt;/span&gt;'</code><code class="php plain">,</code></div><div class="line number2 index1 alt1"><code class="php spaces">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'controller'</code><code class="php plain">=&gt;</code><code class="php string">'carts'</code><code class="php plain">,</code><code class="php string">'action'</code><code class="php plain">=&gt;</code><code class="php string">'view'</code><code class="php plain">),</code><code class="php keyword">array</code><code class="php plain">(</code><code class="php string">'escape'</code><code class="php plain">=&gt;false));?&gt;</code></div></div></td></tr></tbody></table></div></div>

<h6 id="sec5">5. Download</h6> 
<p>Now we should have a nice and fully working CakePHP powered shopping cart. You can download its full source code from link below:</p>
<p class="text-center"><a target="_blank" class="btn btn-success btn-lg" href="http://www.startutorial.com/app/webroot/downloads/cakephp-shopping-cart.zip">Download</a></p>
 
 
 <h6 id="sec6">6. The end</h6> 

  <p>
	Hopefully this simple tutorial helped you with your development.<br>
	If you like our post, please follow us on <a target="_blank" href="http://twitter.com/startutorial">Twitter</a> and help spread the word. We need your support to continue.
	<br>
	If you have questions or find our mistakes in above tutorial, do leave a comment below to let us know.
  </p>      
  

<p class="alert alert-info">
You might also want to check out course <a href="http://www.lynda.com/CakePHP-tutorials/Up-Running-CakePHP/126123-2.html?utm_medium=ldc-partner&amp;utm_source=SSPRC&amp;utm_content=524&amp;utm_campaign=CD15153&amp;bid=524&amp;aid=CD15153" target="_blank">Up and Running with CakePHP</a> from lynda.com.
</p>   
            <p>
                <script src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async=""></script>
<!-- Star Tutorial Content Full Width -->
<ins data-ad-slot="5364757395" data-ad-client="ca-pub-7968545824537000" style="display:inline-block;width:728px;height:90px" class="adsbygoogle" data-adsbygoogle-status="done"><ins style="display:inline-table;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent" id="aswift_1_expand"><ins style="display:block;border:none;height:90px;margin:0;padding:0;position:relative;visibility:visible;width:728px;background-color:transparent" id="aswift_1_anchor"><iframe width="728" height="90" frameborder="0" style="left:0;position:absolute;top:0;" name="aswift_1" id="aswift_1" onload="var i=this.id,s=window.google_iframe_oncopy,H=s&amp;&amp;s.handlers,h=H&amp;&amp;H[i],w=this.contentWindow,d;try{d=w.document}catch(e){}if(h&amp;&amp;d&amp;&amp;(!d.body||!d.body.firstChild)){if(h.call){setTimeout(h,0)}else if(h.match){try{h=s.upd(h,i)}catch(e){}w.location.replace(h)}}" allowfullscreen="true" scrolling="no" allowtransparency="true" hspace="0" vspace="0" marginheight="0" marginwidth="0"></iframe></ins></ins></ins>
<script>
    (adsbygoogle = window.adsbygoogle || []).push({});
</script>            </p>

			<div style="margin: 19px 0px 0px 0px;" id="sharethis"> 
            <span displaytext="Tweet" class="st_twitter_hcount" st_url="http://www.startutorial.com/articles/view/build-a-shopping-cart-with-cakephp-and-jquery-part-2" st_processed="yes"><span style="text-decoration:none;color:#000000;display:inline-block;cursor:pointer;" class="stButton"><span><span class="stMainServices st-twitter-counter" style="background-image: url(&quot;http://w.sharethis.com/images/twitter_counter.png&quot;);">&nbsp;</span><span class="stArrow"><span class="stButton_gradient stHBubble" style="display: inline-block;"><span class="stBubble_hcount">7</span></span></span></span></span></span>
            <span displaytext="Facebook" class="st_facebook_hcount" st_url="http://www.startutorial.com/articles/view/build-a-shopping-cart-with-cakephp-and-jquery-part-2" st_processed="yes"><span style="text-decoration:none;color:#000000;display:inline-block;cursor:pointer;" class="stButton"><span><span class="stMainServices st-facebook-counter" style="background-image: url(&quot;http://w.sharethis.com/images/facebook_counter.png&quot;);">&nbsp;</span><span class="stArrow"><span class="stButton_gradient stHBubble" style="display: inline-block;"><span class="stBubble_hcount">48</span></span></span></span></span></span>
            <span displaytext="Google plus" class="st_plusone_hcount" st_url="http://www.startutorial.com/articles/view/build-a-shopping-cart-with-cakephp-and-jquery-part-2" st_processed="yes"><div style="display:inline-block;overflow:hidden;line-height:0px;position:relative;vertical-align:middle;bottom:0px;width:75px; height:21px;">&nbsp;<div style="text-indent: 0px; margin: 0px; padding: 0px; background: transparent none repeat scroll 0% 0%; border-style: none; float: none; line-height: normal; font-size: 1px; vertical-align: baseline; display: inline-block; width: 90px; height: 20px;" id="___plusone_1"><iframe width="100%" frameborder="0" hspace="0" marginheight="0" marginwidth="0" scrolling="no" style="position: static; top: 0px; width: 90px; margin: 0px; border-style: none; left: 0px; visibility: visible; height: 20px;" tabindex="0" vspace="0" id="I1_1465620867034" name="I1_1465620867034" src="https://apis.google.com/se/0/_/+1/fastbutton?usegapi=1&amp;size=medium&amp;count=true&amp;origin=http%3A%2F%2Fwww.startutorial.com&amp;url=http%3A%2F%2Fwww.startutorial.com%2Farticles%2Fview%2Fbuild-a-shopping-cart-with-cakephp-and-jquery-part-2&amp;gsrc=3p&amp;jsh=m%3B%2F_%2Fscs%2Fapps-static%2F_%2Fjs%2Fk%3Doz.gapi.en.4MN1P2SLNzM.O%2Fm%3D__features__%2Fam%3DAQ%2Frt%3Dj%2Fd%3D1%2Frs%3DAGLTcCPlF-r6wrAZhkxBysyjtf3RWyfWJA#_methods=onPlusOne%2C_ready%2C_close%2C_open%2C_resizeMe%2C_renderstart%2Concircled%2Cdrefresh%2Cerefresh&amp;id=I1_1465620867034&amp;parent=http%3A%2F%2Fwww.startutorial.com&amp;pfname=&amp;rpctoken=40189880" data-gapiattached="true" title="+1"></iframe></div></div></span>
            <span displaytext="Stumble" class="st_stumbleupon_hcount" st_url="http://www.startutorial.com/articles/view/build-a-shopping-cart-with-cakephp-and-jquery-part-2" st_processed="yes"><span style="text-decoration:none;color:#000000;display:inline-block;cursor:pointer;" class="stButton"><span><span class="stButton_gradient"><span class="chicklets stumbleupon">Stumble</span></span><span class="stArrow"><span class="stButton_gradient stHBubble" style="display: inline-block;"><span class="stBubble_hcount">3</span></span></span></span></span></span>     
</div>
 		</div>
